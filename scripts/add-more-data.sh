#!/bin/bash

echo "ðŸ“ Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð² RAG ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ..."

documents=(
    "Python - ÑÑ‚Ð¾ Ð¸Ð½Ñ‚ÐµÑ€Ð¿Ñ€ÐµÑ‚Ð¸Ñ€ÑƒÐµÐ¼Ñ‹Ð¹ ÑÐ·Ñ‹Ðº Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð²Ñ‹ÑÐ¾ÐºÐ¾Ð³Ð¾ ÑƒÑ€Ð¾Ð²Ð½Ñ Ñ Ð´Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ Ñ‚Ð¸Ð¿Ð¸Ð·Ð°Ñ†Ð¸ÐµÐ¹."
    "Ð¡Ñ‚Ð¾Ð»Ð¸Ñ†Ð° Ð“ÐµÑ€Ð¼Ð°Ð½Ð¸Ð¸ - Ð‘ÐµÑ€Ð»Ð¸Ð½, ÑÑ‚Ð¾ ÐºÑ€ÑƒÐ¿Ð½Ñ‹Ð¹ ÐºÑƒÐ»ÑŒÑ‚ÑƒÑ€Ð½Ñ‹Ð¹ Ð¸ ÑÐºÐ¾Ð½Ð¾Ð¼Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ñ†ÐµÐ½Ñ‚Ñ€ Ð•Ð²Ñ€Ð¾Ð¿Ñ‹."
    "Docker - Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ð° Ð´Ð»Ñ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹, ÑƒÐ¿Ñ€Ð¾Ñ‰Ð°ÑŽÑ‰Ð°Ñ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ."
    "ÐœÐ°ÑˆÐ¸Ð½Ð½Ð¾Ðµ Ð¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ðµ - ÑÑ‚Ð¾ Ð¿Ð¾Ð´Ñ€Ð°Ð·Ð´ÐµÐ» Ð¸ÑÐºÑƒÑÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð¸Ð½Ñ‚ÐµÐ»Ð»ÐµÐºÑ‚Ð°, focusing Ð½Ð° Ð°Ð»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼Ð°Ñ…."
    "Ð‘Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ…Ñ€Ð°Ð½ÑÑ‚ Ð¸ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·ÑƒÑŽÑ‚ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð´Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ð¸ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸."
    "Ð’ÐµÐ±-Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð²ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð²ÐµÐ±-ÑÐ°Ð¹Ñ‚Ð¾Ð² Ð¸ Ð²ÐµÐ±-Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹ Ð´Ð»Ñ Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚Ð°."
    "ÐœÐ¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÐ½Ð°Ñ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð° Ñ€Ð°Ð·Ð±Ð¸Ð²Ð°ÐµÑ‚ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð½Ð° Ð½ÐµÐ±Ð¾Ð»ÑŒÑˆÐ¸Ðµ Ð½ÐµÐ·Ð°Ð²Ð¸ÑÐ¸Ð¼Ñ‹Ðµ ÑÐµÑ€Ð²Ð¸ÑÑ‹."
    "DevOps - ÑÑ‚Ð¾ ÐºÑƒÐ»ÑŒÑ‚ÑƒÑ€Ð° Ð¸ Ð¿Ñ€Ð°ÐºÑ‚Ð¸ÐºÐ°, Ð¾Ð±ÑŠÐµÐ´Ð¸Ð½ÑÑŽÑ‰Ð°Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÑƒ Ð¸ ÑÐºÑÐ¿Ð»ÑƒÐ°Ñ‚Ð°Ñ†Ð¸ÑŽ."
)

for i in "${!documents[@]}"; do
    doc="${documents[$i]}"
    echo "  Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼: ${doc:0:60}..."
    
    # ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð²ÐµÐºÑ‚Ð¾Ñ€
    VECTOR_RESP=$(curl -s -X POST http://localhost:8080/vectors \
      -H "Content-Type: application/json" \
      -d "{\"text\": \"$doc\"}")
    
    VECTOR=$(echo $VECTOR_RESP | jq -r '.vector | @json')
    
    # Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð² Qdrant
    curl -s -X PUT "http://localhost:6333/collections/documents/points?wait=true" \
      -H "Content-Type: application/json" \
      -d "{
        \"points\": [
          {
            \"id\": $((i+1000)),
            \"vector\": $VECTOR,
            \"payload\": {
              \"text\": \"$doc\",
              \"category\": \"Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¸\"
            }
          }
        ]
      }" > /dev/null
    
    sleep 0.3
done

echo "âœ… Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ñ‹"
