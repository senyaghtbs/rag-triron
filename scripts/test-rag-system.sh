#!/bin/bash

echo "üöÄ –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–ª–Ω—É—é RAG —Å–∏—Å—Ç–µ–º—É..."

# 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–¥–æ—Ä–æ–≤—å–µ
echo "üîß –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã..."
curl -s http://localhost:9000/health | jq

# 2. –¢–µ—Å—Ç–∏—Ä—É–µ–º LLM –æ—Ç–¥–µ–ª—å–Ω–æ
echo -e "\nü§ñ –¢–µ—Å—Ç–∏—Ä—É–µ–º LLM..."
curl -s -X POST http://localhost:8000/generate \
  -H "Content-Type: application/json" \
  -d '{"prompt": "–ß—Ç–æ —Ç–∞–∫–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç?"}' | jq '.text'

# 3. –¢–µ—Å—Ç–∏—Ä—É–µ–º RAG –∑–∞–ø—Ä–æ—Å—ã
echo -e "\nüîç –¢–µ—Å—Ç–∏—Ä—É–µ–º RAG –∑–∞–ø—Ä–æ—Å—ã..."

questions=(
    "–ß—Ç–æ —Ç–∞–∫–æ–µ Python?"
    "–ö–∞–∫–∏–µ —Å—Ç–æ–ª–∏—Ü—ã —Ç—ã –∑–Ω–∞–µ—à—å?"
    "–ß—Ç–æ —Ç–∞–∫–æ–µ –∫—É–±–µ—Ä–Ω–µ—Ç–µ—Å?"
    "–†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç"
)

for question in "${questions[@]}"; do
    echo -e "\n‚ùì –í–æ–ø—Ä–æ—Å: $question"
    curl -s -X POST http://localhost:9000/query \
      -H "Content-Type: application/json" \
      -d "{\"question\": \"$question\"}" | jq -r '.answer' | head -3
    echo "---"
done

echo -e "\nÔøΩÔøΩ RAG —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç!"
